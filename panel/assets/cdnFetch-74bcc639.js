import{w as g,o as _,c as y,a as l,d as a,e as k,h as b,i as w,v as i,g as d,f as N,t as C,b as p,j as V}from"./index-d963b4b4.js";import{M as S}from"./CodeEditor-82df2dd4.js";import{n as c}from"./notyf-cbf9e3c6.js";import{r as U}from"./reinit-24f7bee3.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const O={class:"w-full p-6 mx-auto"},J={class:"flex flex-wrap -mx-3"},L={class:"w-full max-w-full px-3"},F={class:"relative flex flex-col h-full min-w-0 break-words bg-white border-0 shadow-soft-xl rounded-2xl bg-clip-border"},M={class:"flex-auto p-4"},B={class:"mb-4"},j={class:"flex-auto p-4"},E={class:"monacoEditor"},A={class:"flex flex-col pl-0 mb-0 rounded-lg"},T={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},I={class:"min-h-6 mb-0.5 block pl-0"},P={class:"relative text-inherit"},$={class:"min-h-6 mb-0.5 block pl-0"},q=["disabled"],z=["disabled"],G=["disabled"],H={class:"relative text-inherit"},K={class:"min-h-6 mb-0.5 block pl-0"},Q=["disabled"],R={class:"relative text-inherit"},W={class:"min-h-6 mb-0.5 block pl-0"},X=["disabled"],Y={class:"relative text-inherit"},Z={class:"min-h-6 mb-0.5 block pl-0"},ee=["disabled"],le={class:"flex flex-col pl-0"},te={class:"label-text ml-0"},se=["disabled"],ae=["disabled"],oe=["disabled"],v="CDN_Fetch_Config",ne={__name:"cdnFetch",setup(ie){const r=new CacheDB("CyanAcc","CyanAccDB"),u=p("visual"),t=p({}),m=async()=>{await r.write(v,JSON.stringify(t.value)),await U()?c.success("设置已保存并应用"):c.info("设置已保存，但尚未应用")},o=p("");g(t,(n,e)=>{o.value=JSON.stringify(n,null,4)},{deep:!0}),(async()=>{const n=JSON.parse(await r.read(v)||"{}");Object.keys(n).length!==0?(t.value=n,o.value=JSON.stringify(t.value,null,4)):await r.write(v,JSON.stringify(t.value))})();const x={language:"json",code:o.value},h=V({el:"monaco",options:x}),f=n=>{o.value=n;try{JSON.parse(o.value)}catch{console.log();return}t.value=JSON.parse(o.value)};return(n,e)=>(_(),y("div",O,[l("div",J,[l("div",L,[l("div",F,[e[27]||(e[27]=l("div",{class:"p-4 pb-0 mb-0 bg-white border-b-0 rounded-t-2xl"},[l("h6",{class:"mb-0"},"CDN获取配置 / CDN Fetch Config")],-1)),l("div",M,[e[26]||(e[26]=l("h6",{class:"mt-6 font-bold leading-tight uppercase text-xs text-slate-500"},"选择编辑模式",-1)),l("div",B,[a(l("select",{class:"select-form","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s)},[...e[12]||(e[12]=[l("option",{value:"visual"},"可视化编辑",-1),l("option",{value:"code"},"JSON数据库编辑",-1)])],512),[[k,u.value]])]),l("div",j,[a(l("div",E,[w(S,{option:h,value:o.value,onUpdateContent:f},null,8,["option","value"])],512),[[b,u.value==="code"]]),a(l("div",null,[l("div",A,[l("div",T,[l("div",I,[a(l("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=s=>t.value.enable=s)},null,512),[[i,t.value.enable]]),e[13]||(e[13]=l("label",{class:"label-text"},"启用“CDN本地智能调度功能”",-1))])]),e[19]||(e[19]=l("h6",{class:"mt-3 font-bold leading-tight uppercase text-xs text-slate-500"},"CDN缓存设置 ",-1)),l("div",P,[l("div",$,[a(l("input",{class:"check-btn",type:"checkbox",disabled:!t.value.enable,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.cache=s)},null,8,q),[[i,t.value.cache]]),e[14]||(e[14]=l("label",{class:"label-text"},"启用“CDN缓存功能”",-1))])]),e[20]||(e[20]=l("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 一级缓存时长（毫秒） ",-1)),a(l("input",{type:"text",class:"select-form mt-0",placeholder:"一级缓存时长",disabled:!(t.value.enable&&t.value.cache),"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.cacheL1=s)},null,8,z),[[d,t.value.cacheL1,void 0,{number:!0}]]),e[21]||(e[21]=l("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 二级缓存时长（毫秒） ",-1)),a(l("input",{type:"text",class:"select-form mt-0",placeholder:"二级缓存时长",disabled:!(t.value.enable&&t.value.cache),"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.cacheL2=s)},null,8,G),[[d,t.value.cacheL2,void 0,{number:!0}]]),e[22]||(e[22]=l("h6",{class:"mt-5 font-bold leading-tight uppercase text-xs text-slate-500"},"CDN Fetch 设置",-1)),l("div",H,[l("div",K,[a(l("input",{class:"check-btn",type:"checkbox",disabled:!t.value.enable,"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.parallel=s)},null,8,Q),[[i,t.value.parallel]]),e[15]||(e[15]=l("label",{class:"label-text"},"启用“智能多线程Fetch引擎”",-1))])]),l("div",R,[l("div",W,[a(l("input",{class:"check-btn",type:"checkbox",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.origin=s)},null,8,X),[[i,t.value.origin]]),e[16]||(e[16]=l("label",{class:"label-text"},"在多线程请求时允许将原请求作为附加源加入",-1))])]),l("div",Y,[l("div",Z,[a(l("input",{class:"check-btn",type:"checkbox",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":e[7]||(e[7]=s=>t.value.ignore_search=s)},null,8,ee),[[i,t.value.ignore_search]]),e[17]||(e[17]=l("label",{class:"label-text"},"屏蔽Search字符串以提升缓存命中率",-1))])]),e[23]||(e[23]=l("h6",{class:"mt-3 font-bold leading-tight uppercase text-xs text-slate-500"},"多线程请求设置 ",-1)),l("ul",le,[l("label",te,[e[18]||(e[18]=N("Parallel并发引擎线程数：",-1)),l("span",null,C(t.value.threads)+"个",1)]),a(l("input",{type:"range",min:"2",max:"5",class:"slider w-full",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":e[8]||(e[8]=s=>t.value.threads=s)},null,8,se),[[d,t.value.threads,void 0,{number:!0}]])]),e[24]||(e[24]=l("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 请求一级超时时长（毫秒） ",-1)),a(l("input",{type:"text",class:"select-form mt-0",placeholder:"请求一级超时时长",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":e[9]||(e[9]=s=>t.value.timeoutL1=s)},null,8,ae),[[d,t.value.timeoutL1,void 0,{number:!0}]]),e[25]||(e[25]=l("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 请求二级超时时长（毫秒） ",-1)),a(l("input",{type:"text",class:"select-form mt-0",placeholder:"请求二级超时时长",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":e[10]||(e[10]=s=>t.value.timeoutL2=s)},null,8,oe),[[d,t.value.timeoutL2,void 0,{number:!0}]])])],512),[[b,u.value==="visual"]]),l("button",{onClick:e[11]||(e[11]=s=>m()),type:"button",class:"apply-btn"},"保存")])])])])])]))}},be=D(ne,[["__scopeId","data-v-480f9b11"]]);export{be as default};
