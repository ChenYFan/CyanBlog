import{r as p,w,h as k,o as B,c as U,a as t,d as a,e as V,i as b,j as c,v as i,g as d,f as S,t as C}from"./index-cc2e0800.js";import{M as N}from"./CodeEditor-f92d8413.js";import{n as m}from"./notyf-6eadf77a.js";import{_ as O}from"./EditableTable-8c04c74e.js";import{r as J}from"./reinit-5dd860ba.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const M={class:"w-full p-6 mx-auto"},F={class:"flex flex-wrap -mx-3"},j={class:"w-full max-w-full px-3"},D={class:"relative flex flex-col h-full min-w-0 break-words bg-white border-0 shadow-soft-xl rounded-2xl bg-clip-border"},E={class:"flex-auto p-4"},I={class:"mb-4"},A={class:"flex-auto p-4"},T={class:"monacoEditor"},$={class:"flex flex-col pl-0 mb-0 rounded-lg"},P={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},q={class:"min-h-6 mb-0.5 block pl-0"},z={class:"relative text-inherit"},G={class:"min-h-6 mb-0.5 block pl-0"},H=["disabled"],K=["disabled"],Q=["disabled"],R={class:"relative text-inherit"},W={class:"min-h-6 mb-0.5 block pl-0"},X=["disabled"],Y={class:"relative text-inherit"},Z={class:"min-h-6 mb-0.5 block pl-0"},ee=["disabled"],te={class:"relative text-inherit"},le={class:"min-h-6 mb-0.5 block pl-0"},se=["disabled"],ae={class:"flex flex-col pl-0"},oe={class:"label-text ml-0"},ne=["disabled"],ie=["disabled"],de=["disabled"],ue=["disabled","value"],re={class:"flex flex-col pl-0 mb-0 rounded-lg"},v="Blog_Fetch_Config",pe={__name:"blogFetch",setup(ve){const r=new CacheDB("CyanAcc","CyanAccDB"),u=p("visual"),l=p({}),x=async()=>{await r.write(v,JSON.stringify(l.value)),await J()?m.success("设置已保存并应用"):m.info("设置已保存，但尚未应用")},n=p("");w(l,(o,e)=>{n.value=JSON.stringify(o,null,4)},{deep:!0}),(async()=>{const o=JSON.parse(await r.read(v)||"{}");Object.keys(o).length!==0?(l.value=o,n.value=JSON.stringify(l.value,null,4)):await r.write(v,JSON.stringify(l.value))})();const g={language:"json",code:n.value},f=k({el:"monaco",options:g}),h=o=>{n.value=o;try{JSON.parse(n.value)}catch{console.log();return}l.value=JSON.parse(n.value)},y={type:{type:"string",description:"镜像类型",width:"20%"},var:{type:"json",description:"镜像拼接变量",width:"50%"},weight:{type:"number",description:"权重",width:"5%"}},_=o=>{l.value.mirrors=o};return(o,e)=>(B(),U("div",M,[t("div",F,[t("div",j,[t("div",D,[e[30]||(e[30]=t("div",{class:"p-4 pb-0 mb-0 bg-white border-b-0 rounded-t-2xl"},[t("h6",{class:"mb-0"},"Blog获取配置 / Blog Fetch Config")],-1)),t("div",E,[e[29]||(e[29]=t("h6",{class:"mt-6 font-bold leading-tight uppercase text-xs text-slate-500"},"选择编辑模式",-1)),t("div",I,[a(t("select",{class:"select-form","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s)},e[13]||(e[13]=[t("option",{value:"visual"},"可视化编辑",-1),t("option",{value:"code"},"JSON数据库编辑",-1)]),512),[[V,u.value]])]),t("div",A,[a(t("div",T,[c(N,{option:f,value:n.value,onUpdateContent:h},null,8,["option","value"])],512),[[b,u.value==="code"]]),a(t("div",null,[t("div",$,[t("div",P,[t("div",q,[a(t("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=s=>l.value.enable=s)},null,512),[[i,l.value.enable]]),e[14]||(e[14]=t("label",{class:"label-text"},"启用“Blog本地智能调度功能”",-1))])]),e[20]||(e[20]=t("h6",{class:"mt-3 font-bold leading-tight uppercase text-xs text-slate-500"},"Blog缓存设置 ",-1)),t("div",z,[t("div",G,[a(t("input",{class:"check-btn",type:"checkbox",disabled:!l.value.enable,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.cache=s)},null,8,H),[[i,l.value.cache]]),e[15]||(e[15]=t("label",{class:"label-text"},"启用“Blog缓存功能”",-1))])]),e[21]||(e[21]=t("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 一级缓存时长（毫秒） ",-1)),a(t("input",{type:"text",class:"select-form mt-0",placeholder:"一级缓存时长",disabled:!(l.value.enable&&l.value.cache),"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.cacheL1=s)},null,8,K),[[d,l.value.cacheL1,void 0,{number:!0}]]),e[22]||(e[22]=t("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 二级缓存时长（毫秒） ",-1)),a(t("input",{type:"text",class:"select-form mt-0",placeholder:"二级缓存时长",disabled:!(l.value.enable&&l.value.cache),"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.cacheL2=s)},null,8,Q),[[d,l.value.cacheL2,void 0,{number:!0}]]),e[23]||(e[23]=t("h6",{class:"mt-5 font-bold leading-tight uppercase text-xs text-slate-500"},"Blog Fetch 设置",-1)),t("div",R,[t("div",W,[a(t("input",{class:"check-btn",type:"checkbox",disabled:!l.value.enable,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.parallel=s)},null,8,X),[[i,l.value.parallel]]),e[16]||(e[16]=t("label",{class:"label-text"},"启用“智能多线程Fetch引擎”",-1))])]),t("div",Y,[t("div",Z,[a(t("input",{class:"check-btn",type:"checkbox",disabled:!(l.value.enable&&l.value.parallel),"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.origin=s)},null,8,ee),[[i,l.value.origin]]),e[17]||(e[17]=t("label",{class:"label-text"},"在多线程请求时允许将原请求作为附加源加入",-1))])]),t("div",te,[t("div",le,[a(t("input",{class:"check-btn",type:"checkbox",disabled:!(l.value.enable&&l.value.parallel),"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.ignore_search=s)},null,8,se),[[i,l.value.ignore_search]]),e[18]||(e[18]=t("label",{class:"label-text"},"屏蔽Search字符串以提升缓存命中率",-1))])]),e[24]||(e[24]=t("h6",{class:"mt-3 font-bold leading-tight uppercase text-xs text-slate-500"},"多线程请求设置 ",-1)),t("ul",ae,[t("label",oe,[e[19]||(e[19]=S("Parallel并发引擎线程数：")),t("span",null,C(l.value.threads)+"个",1)]),a(t("input",{type:"range",min:"2",max:"5",class:"slider w-full",disabled:!(l.value.enable&&l.value.parallel),"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.threads=s)},null,8,ne),[[d,l.value.threads,void 0,{number:!0}]])]),e[25]||(e[25]=t("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 请求一级超时时长（毫秒） ",-1)),a(t("input",{type:"text",class:"select-form mt-0",placeholder:"请求一级超时时长",disabled:!(l.value.enable&&l.value.parallel),"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.timeoutL1=s)},null,8,ie),[[d,l.value.timeoutL1,void 0,{number:!0}]]),e[26]||(e[26]=t("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 请求二级超时时长（毫秒） ",-1)),a(t("input",{type:"text",class:"select-form mt-0",placeholder:"请求二级超时时长",disabled:!(l.value.enable&&l.value.parallel),"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.timeoutL2=s)},null,8,de),[[d,l.value.timeoutL2,void 0,{number:!0}]]),e[27]||(e[27]=t("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 匹配域名（含端口，逗号分隔） ",-1)),t("input",{type:"text",class:"select-form mt-0",placeholder:"匹配域名",disabled:!l.value.enable,value:l.value.domain,onInput:e[11]||(e[11]=s=>l.value.domain=s.target.value.split(","))},null,40,ue),e[28]||(e[28]=t("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 镜像内容 ",-1)),t("div",re,[c(O,{data:l.value.mirrors,keyintro:y,onUpdateContent:_},null,8,["data"])])])],512),[[b,u.value==="visual"]]),t("button",{onClick:e[12]||(e[12]=s=>x()),type:"button",class:"apply-btn"},"保存")])])])])])]))}},he=L(pe,[["__scopeId","data-v-51bf3d9f"]]);export{he as default};
