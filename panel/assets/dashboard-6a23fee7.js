import"./notyf-cbf9e3c6.js";import{w as B,o as r,c as _,a as s,t as i,F as g,r as T,b as c,n as C}from"./index-d963b4b4.js";const m=async(h,l)=>(typeof l>"u"&&(l={}),await fetch("/CyanAcc/api",{method:"POST",body:JSON.stringify({action:h,...l})}).then(n=>n.json()).then(n=>{if(n.status==="OK")return n.data;throw new Error(`Get Error: ${n.message}`)})),S={class:"row"},A={class:"col-xl-3 col-sm-6 mb-xl-0 mb-4"},E={class:"card"},I={class:"card-body p-3"},P={class:"row"},z={class:"col-8"},D={class:"numbers"},G={class:"col-xl-3 col-sm-6 mb-xl-0 mb-4"},$={class:"card"},L={class:"card-body p-3"},V={class:"row"},M={class:"col-8"},N={class:"numbers"},k={class:"font-weight-bolder mb-0"},F={class:"col-xl-3 col-sm-6 mb-xl-0 mb-4"},K={class:"card"},O={class:"card-body p-3"},j={class:"row"},Z={class:"col-8"},H={class:"numbers"},J={class:"font-weight-bolder mb-0"},U={class:"col-xl-3 col-sm-6"},Y={class:"card"},q={class:"card-body p-3"},Q={class:"row"},W={class:"col-8"},X={class:"numbers"},R={class:"font-weight-bolder mb-0"},ss={class:"row mt-4"},ts={class:"col-lg-12 mb-lg-0 mb-4"},es={class:"card"},os={class:"table-responsive w-full"},is={class:"table align-items-center w-full"},ns={class:"text-center"},ls={class:"text-sm mb-2"},cs={class:"text-center"},as={class:"text-sm mb-2"},ds={class:"align-middle text-sm"},rs={class:"col text-center"},_s={class:"text-sm mb-2"},ms={class:"align-middle text-sm"},hs={class:"col text-center"},us={__name:"dashboard",setup(h){const l=e=>{if(typeof e!="number")return e;const t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];let o=0;for(;e>=1024;)e/=1024,o++;return`${e.toFixed(2)} ${t[o]}`},n=e=>{if(typeof e!="number")return e;const t=["毫秒","秒","分钟","小时","天","年"],o=[1e3,60,60,24,365];let a=0;for(;e>=o[a];)e/=o[a],a++;return`${Math.round(e)} ${t[a]}`},b=c("缓存大小尚在获取..."),d=c([]),v=c(0);B(d,e=>{v.value=e.length});const u=c("1970/1/1 08:00:00"),x=c(0),p=async e=>{const t=await m("GET_CACHE_SIZE",{precise:e});b.value=l(t)},w=async()=>{const e=await m("DUMP_VAR_TASKLIST");d.value=e},f=async()=>{const e=new CacheDB("CyanAcc","CyanAccDB");u.value=new Date(await e.read("Blog_Version",{default:0,type:"number"})).toLocaleString()},y=async()=>{const e=await m("GET_INIT_TIME");x.value=e};return(async()=>(await p(!1),await w(),setInterval(async()=>{await w()},1e3*5),await f(),await y()))(),(e,t)=>(r(),_(g,null,[s("div",S,[s("div",A,[s("div",E,[s("div",I,[s("div",P,[s("div",z,[s("div",D,[t[1]||(t[1]=s("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"缓存空间占用",-1)),s("h5",{class:"font-weight-bolder mb-0",onClick:t[0]||(t[0]=o=>p(!0))},i(l(b.value)),1)])])])])])]),s("div",G,[s("div",$,[s("div",L,[s("div",V,[s("div",M,[s("div",N,[t[2]||(t[2]=s("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"持久任务数量",-1)),s("h5",k,i(v.value),1)])]),t[3]||(t[3]=s("div",{class:"col-4 text-end"},[s("div",{class:"icon icon-shape bg-gradient-primary shadow text-center border-radius-md"},[s("i",{class:"ni ni-world text-lg opacity-10","aria-hidden":"true"})])],-1))])])])]),s("div",F,[s("div",K,[s("div",O,[s("div",j,[s("div",Z,[s("div",H,[t[4]||(t[4]=s("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"当前博客版本更新时间",-1)),s("h5",J,i(u.value),1)])]),t[5]||(t[5]=s("div",{class:"col-4 text-end"},[s("div",{class:"icon icon-shape bg-gradient-primary shadow text-center border-radius-md"},[s("i",{class:"ni ni-paper-diploma text-lg opacity-10","aria-hidden":"true"})])],-1))])])])]),s("div",U,[s("div",Y,[s("div",q,[s("div",Q,[s("div",W,[s("div",X,[t[6]||(t[6]=s("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"CyanAcc激活时间",-1)),s("h5",R,i(new Date(x.value).toLocaleString()),1)])]),t[7]||(t[7]=s("div",{class:"col-4 text-end"},[s("div",{class:"icon icon-shape bg-gradient-primary shadow text-center border-radius-md"},[s("i",{class:"ni ni-cart text-lg opacity-10","aria-hidden":"true"})])],-1))])])])])]),s("div",ss,[s("div",ts,[s("div",es,[t[9]||(t[9]=s("div",{class:"card-header pb-0 p-3"},[s("div",{class:"d-flex justify-content-between"},[s("h6",{class:"mb-2"},"持久任务表")])],-1)),s("div",os,[s("table",is,[s("tbody",null,[t[8]||(t[8]=s("tr",null,[s("td",null,[s("div",{class:"text-center"},[s("p",{class:"text-xs font-weight-bold mb-2"},"简介")])]),s("td",null,[s("div",{class:"text-center"},[s("p",{class:"text-xs font-weight-bold mb-2"},"循环周期")])]),s("td",{class:"align-middle text-sm"},[s("div",{class:"col text-center"},[s("p",{class:"text-xs font-weight-bold mb-2"},"上一次执行")])]),s("td",{class:"align-middle text-sm"},[s("div",{class:"col text-center"},[s("p",{class:"text-xs font-weight-bold mb-2"},"启用状态")])])],-1)),(r(!0),_(g,null,T(d.value,o=>(r(),_("tr",null,[s("td",null,[s("div",ns,[s("h6",ls,i(o.description),1)])]),s("td",null,[s("div",cs,[s("h6",as,i(n(o.interval)),1)])]),s("td",ds,[s("div",rs,[s("h6",_s,i(new Date(o.lastrun.time).toLocaleString()),1)])]),s("td",ms,[s("div",hs,[s("h6",{class:C(["text-sm mb-2",o.enable?"text-success":"text-danger"])},i(o.enable?"启用":"禁用"),3)])])]))),256))])])])])])])],64))}};export{us as default};
