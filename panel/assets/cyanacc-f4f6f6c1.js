import{r as _,o as v,c as h,a as e,d as a,v as o,f as n,t as r,g as b}from"./index-497b97f3.js";import{C as x,n as u}from"./notyf-b7b7a415.js";import{r as m}from"./reinit-8d43c4a4.js";const f={class:"w-full p-6 mx-auto"},k={class:"flex flex-wrap -mx-3"},y={class:"w-full max-w-full px-3"},g={class:"relative flex flex-col h-full min-w-0 break-words bg-white border-0 shadow-soft-xl rounded-2xl bg-clip-border"},C=e("div",{class:"p-4 pb-0 mb-0 bg-white border-b-0 rounded-t-2xl"},[e("h6",{class:"mb-0"},"CyanAcc总引擎设置")],-1),w={class:"flex-auto p-4"},A={class:"flex flex-col pl-0 mb-0 rounded-lg"},T={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},P={class:"min-h-6 mb-0.5 block pl-0"},S=e("label",{class:"label-text"},"CyanAcc总开关",-1),V={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},N={class:"min-h-6 mb-0.5 block pl-0"},U=["disabled"],B=e("label",{class:"label-text"},"在对CyanAcc设置进行更改后，立即应用",-1),D=e("h6",{class:"mt-6 font-bold leading-tight uppercase text-xs text-slate-500"},"持久化任务",-1),O={class:"flex flex-col pl-0 mb-0 rounded-lg"},J={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},M={class:"min-h-6 mb-0.5 block pl-0"},W=["disabled"],j=e("label",{class:"label-text"},"启用CyanAcc PersistentTasks",-1),z={class:"label-text"},E=["disabled"],L=e("br",null,null,-1),$=e("h6",{class:"mt-6 font-bold leading-tight uppercase text-xs text-slate-500"},"自动清除过期缓存",-1),q={class:"flex flex-col pl-0 mb-0 rounded-lg"},F={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},G={class:"min-h-6 mb-0.5 block pl-0"},H=["disabled"],I=e("label",{class:"label-text"},"启用CyanAcc AutoClear",-1),K={class:"label-text"},Q=["disabled"],R=e("br",null,null,-1),X=e("p",{style:{"font-size":"11px"}},[n("Tips:"),e("br"),n(" 1.请不要随意关闭CyanAcc引擎，这会导致你无法再直接进入面板！"),e("br"),n(" 2.持久化任务用于定时执行任务，随ServiceWorker生命周期运行。当你的浏览器关闭所有本站网页后，持久化任务会在1-2分钟内随SW暂停而冻结。当重新激活时，持久化监护会检查任务最后一次运行时间来决定是否运行一次。"),e("br"),n(" 3.AutoClear依赖持久化运行，默认以一个持久化任务存在，会清除所有超过L2缓存时间的缓存。"),e("br")],-1),c="CyanAcc_Config",te={__name:"cyanacc",setup(Y){const l=_({enable:!0,reinit:!1,PersistentTasks:{enable:!0,interval:1e3},AutoClear:{enable:!0,interval:12e4}}),i=new x("CyanAcc","CyanAccDB"),p=async()=>{await i.write(c,JSON.stringify(l.value)),await m()?u.success("设置已保存并应用"):u.info("设置已保存，但尚未应用")};return(async()=>{const d=JSON.parse(await i.read(c)||"{}");Object.keys(d).length!==0?l.value=d:await i.write(c,JSON.stringify(l.value))})(),(d,t)=>(v(),h("div",f,[e("div",k,[e("div",y,[e("div",g,[C,e("div",w,[e("ul",A,[e("li",T,[e("div",P,[a(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>l.value.enable=s)},null,512),[[o,l.value.enable]]),S])]),e("li",V,[e("div",N,[a(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.reinit=s),disabled:!l.value.enable},null,8,U),[[o,l.value.reinit]]),B])])]),D,e("ul",O,[e("li",J,[e("div",M,[a(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.PersistentTasks.enable=s),disabled:!l.value.enable},null,8,W),[[o,l.value.PersistentTasks.enable]]),j])]),e("label",z,[n("PersistentTasks激活间隔"),e("span",null,r(l.value.PersistentTasks.interval/1e3)+"秒",1)]),a(e("input",{type:"range",min:"1000",max:"5000",class:"slider w-full",step:"1000",disabled:!(l.value.enable&&l.value.PersistentTasks.enable),"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.PersistentTasks.interval=s)},null,8,E),[[b,l.value.PersistentTasks.interval,void 0,{number:!0}]])]),L,$,e("ul",q,[e("li",F,[e("div",G,[a(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.AutoClear.enable=s),disabled:!(l.value.enable&&l.value.PersistentTasks.enable)},null,8,H),[[o,l.value.AutoClear.enable]]),I])]),e("label",K,[n("AutoClear间隔时间"),e("span",null,r(l.value.AutoClear.interval/1e3)+"秒",1)]),a(e("input",{type:"range",min:1e3*30,max:1e3*120,step:"1000",class:"slider w-full",disabled:!(l.value.enable&&l.value.PersistentTasks.enable&&l.value.AutoClear.enable),"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.AutoClear.interval=s)},null,8,Q),[[b,l.value.AutoClear.interval,void 0,{number:!0}]])]),R,e("button",{type:"button",class:"apply-btn",onClick:t[6]||(t[6]=s=>p())},"保存"),X])])])])]))}};export{te as default};
