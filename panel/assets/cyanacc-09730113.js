import{r as v,o as x,c as m,a as e,d as a,v as i,f as n,t as b,g as u}from"./index-cc2e0800.js";import{n as p}from"./notyf-6eadf77a.js";import{r as f}from"./reinit-5dd860ba.js";const k={class:"w-full p-6 mx-auto"},y={class:"flex flex-wrap -mx-3"},g={class:"w-full max-w-full px-3"},C={class:"relative flex flex-col h-full min-w-0 break-words bg-white border-0 shadow-soft-xl rounded-2xl bg-clip-border"},w={class:"flex-auto p-4"},A={class:"flex flex-col pl-0 mb-0 rounded-lg"},h={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},_={class:"min-h-6 mb-0.5 block pl-0"},T={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},P={class:"min-h-6 mb-0.5 block pl-0"},S=["disabled"],V={class:"flex flex-col pl-0 mb-0 rounded-lg"},N={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},U={class:"min-h-6 mb-0.5 block pl-0"},B=["disabled"],D={class:"label-text"},O=["disabled"],J={class:"flex flex-col pl-0 mb-0 rounded-lg"},M={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},W={class:"min-h-6 mb-0.5 block pl-0"},j=["disabled"],z={class:"label-text"},E=["disabled"],d="CyanAcc_Config",G={__name:"cyanacc",setup(L){const t=v({enable:!0,reinit:!1,PersistentTasks:{enable:!0,interval:1e3},AutoClear:{enable:!0,interval:12e4}}),o=new CacheDB("CyanAcc","CyanAccDB"),c=async()=>{await o.write(d,JSON.stringify(t.value)),await f()?p.success("设置已保存并应用"):p.info("设置已保存，但尚未应用")};return(async()=>{const r=JSON.parse(await o.read(d)||"{}");Object.keys(r).length!==0?t.value=r:await o.write(d,JSON.stringify(t.value))})(),(r,l)=>(x(),m("div",k,[e("div",y,[e("div",g,[e("div",C,[l[18]||(l[18]=e("div",{class:"p-4 pb-0 mb-0 bg-white border-b-0 rounded-t-2xl"},[e("h6",{class:"mb-0"},"CyanAcc总引擎设置")],-1)),e("div",w,[e("ul",A,[e("li",h,[e("div",_,[a(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=s=>t.value.enable=s)},null,512),[[i,t.value.enable]]),l[7]||(l[7]=e("label",{class:"label-text"},"CyanAcc总开关",-1))])]),e("li",T,[e("div",P,[a(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=s=>t.value.reinit=s),disabled:!t.value.enable},null,8,S),[[i,t.value.reinit]]),l[8]||(l[8]=e("label",{class:"label-text"},"在对CyanAcc设置进行更改后，立即应用",-1))])])]),l[13]||(l[13]=e("h6",{class:"mt-6 font-bold leading-tight uppercase text-xs text-slate-500"},"持久化任务",-1)),e("ul",V,[e("li",N,[e("div",U,[a(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=s=>t.value.PersistentTasks.enable=s),disabled:!t.value.enable},null,8,B),[[i,t.value.PersistentTasks.enable]]),l[9]||(l[9]=e("label",{class:"label-text"},"启用CyanAcc PersistentTasks",-1))])]),e("label",D,[l[10]||(l[10]=n("PersistentTasks激活间隔")),e("span",null,b(t.value.PersistentTasks.interval/1e3)+"秒",1)]),a(e("input",{type:"range",min:"1000",max:"5000",class:"slider w-full",step:"1000",disabled:!(t.value.enable&&t.value.PersistentTasks.enable),"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.PersistentTasks.interval=s)},null,8,O),[[u,t.value.PersistentTasks.interval,void 0,{number:!0}]])]),l[14]||(l[14]=e("br",null,null,-1)),l[15]||(l[15]=e("h6",{class:"mt-6 font-bold leading-tight uppercase text-xs text-slate-500"},"自动清除过期缓存",-1)),e("ul",J,[e("li",M,[e("div",W,[a(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":l[4]||(l[4]=s=>t.value.AutoClear.enable=s),disabled:!(t.value.enable&&t.value.PersistentTasks.enable)},null,8,j),[[i,t.value.AutoClear.enable]]),l[11]||(l[11]=e("label",{class:"label-text"},"启用CyanAcc AutoClear",-1))])]),e("label",z,[l[12]||(l[12]=n("AutoClear间隔时间")),e("span",null,b(t.value.AutoClear.interval/1e3)+"秒",1)]),a(e("input",{type:"range",min:1e3*30,max:1e3*120,step:"1000",class:"slider w-full",disabled:!(t.value.enable&&t.value.PersistentTasks.enable&&t.value.AutoClear.enable),"onUpdate:modelValue":l[5]||(l[5]=s=>t.value.AutoClear.interval=s)},null,8,E),[[u,t.value.AutoClear.interval,void 0,{number:!0}]])]),l[16]||(l[16]=e("br",null,null,-1)),e("button",{type:"button",class:"apply-btn",onClick:l[6]||(l[6]=s=>c())},"保存"),l[17]||(l[17]=e("p",{style:{"font-size":"11px"}},[n("Tips:"),e("br"),n(" 1.请不要随意关闭CyanAcc引擎，这会导致你无法再直接进入面板！"),e("br"),n(" 2.持久化任务用于定时执行任务，随ServiceWorker生命周期运行。当你的浏览器关闭所有本站网页后，持久化任务会在1-2分钟内随SW暂停而冻结。当重新激活时，持久化监护会检查任务最后一次运行时间来决定是否运行一次。"),e("br"),n(" 3.AutoClear依赖持久化运行，默认以一个持久化任务存在，会清除所有超过L2缓存时间的缓存。"),e("br")],-1))])])])])]))}};export{G as default};
