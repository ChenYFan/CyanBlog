import{r as v,w as y,i as k,o as w,c as N,a as e,d as o,e as C,j as h,k as S,v as i,f as c,g as V,t as U,p as D,l as O}from"./index-a53e148b.js";import{M as J}from"./CodeEditor-f2946ece.js";import{C as L,n as _}from"./notyf-b7b7a415.js";import{r as F}from"./reinit-8d43c4a4.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";const a=u=>(D("data-v-2bfeb25d"),u=u(),O(),u),B={class:"w-full p-6 mx-auto"},I={class:"flex flex-wrap -mx-3"},j={class:"w-full max-w-full px-3"},E={class:"relative flex flex-col h-full min-w-0 break-words bg-white border-0 shadow-soft-xl rounded-2xl bg-clip-border"},A=a(()=>e("div",{class:"p-4 pb-0 mb-0 bg-white border-b-0 rounded-t-2xl"},[e("h6",{class:"mb-0"},"CDN获取配置 / CDN Fetch Config")],-1)),T={class:"flex-auto p-4"},P=a(()=>e("h6",{class:"mt-6 font-bold leading-tight uppercase text-xs text-slate-500"},"选择编辑模式",-1)),$={class:"mb-4"},q=a(()=>e("option",{value:"visual"},"可视化编辑",-1)),z=a(()=>e("option",{value:"code"},"JSON数据库编辑",-1)),G=[q,z],H={class:"flex-auto p-4"},K={class:"monacoEditor"},Q={class:"flex flex-col pl-0 mb-0 rounded-lg"},R={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},W={class:"min-h-6 mb-0.5 block pl-0"},X=a(()=>e("label",{class:"label-text"},"启用“CDN本地智能调度功能”",-1)),Y=a(()=>e("h6",{class:"mt-3 font-bold leading-tight uppercase text-xs text-slate-500"},"CDN缓存设置 ",-1)),Z={class:"relative text-inherit"},ee={class:"min-h-6 mb-0.5 block pl-0"},te=["disabled"],le=a(()=>e("label",{class:"label-text"},"启用“CDN缓存功能”",-1)),se=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 一级缓存时长（毫秒） ",-1)),ae=["disabled"],oe=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 二级缓存时长（毫秒） ",-1)),ne=["disabled"],de=a(()=>e("h6",{class:"mt-5 font-bold leading-tight uppercase text-xs text-slate-500"},"CDN Fetch 设置",-1)),ie={class:"relative text-inherit"},ce={class:"min-h-6 mb-0.5 block pl-0"},ue=["disabled"],re=a(()=>e("label",{class:"label-text"},"启用“智能多线程Fetch引擎”",-1)),pe={class:"relative text-inherit"},ve={class:"min-h-6 mb-0.5 block pl-0"},be=["disabled"],he=a(()=>e("label",{class:"label-text"},"在多线程请求时允许将原请求作为附加源加入",-1)),_e={class:"relative text-inherit"},me={class:"min-h-6 mb-0.5 block pl-0"},xe=["disabled"],fe=a(()=>e("label",{class:"label-text"},"屏蔽Search字符串以提升缓存命中率",-1)),ge=a(()=>e("h6",{class:"mt-3 font-bold leading-tight uppercase text-xs text-slate-500"},"多线程请求设置 ",-1)),ye={class:"flex flex-col pl-0"},ke={class:"label-text ml-0"},we=["disabled"],Ne=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 请求一级超时时长（毫秒） ",-1)),Ce=["disabled"],Se=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 请求二级超时时长（毫秒） ",-1)),Ve=["disabled"],b="CDN_Fetch_Config",Ue={__name:"cdnFetch",setup(u){const p=new L("CyanAcc","CyanAccDB"),r=v("visual"),t=v({}),m=async()=>{await p.write(b,JSON.stringify(t.value)),await F()?_.success("设置已保存并应用"):_.info("设置已保存，但尚未应用")},n=v("");y(t,(d,l)=>{n.value=JSON.stringify(d,null,4)},{deep:!0}),(async()=>{const d=JSON.parse(await p.read(b)||"{}");Object.keys(d).length!==0?(t.value=d,n.value=JSON.stringify(t.value,null,4)):await p.write(b,JSON.stringify(t.value))})();const x={language:"json",code:n.value},f=k({el:"monaco",options:x}),g=d=>{n.value=d;try{JSON.parse(n.value)}catch{console.log();return}t.value=JSON.parse(n.value)};return(d,l)=>(w(),N("div",B,[e("div",I,[e("div",j,[e("div",E,[A,e("div",T,[P,e("div",$,[o(e("select",{class:"select-form","onUpdate:modelValue":l[0]||(l[0]=s=>r.value=s)},G,512),[[C,r.value]])]),e("div",H,[o(e("div",K,[S(J,{option:f,value:n.value,onUpdateContent:g},null,8,["option","value"])],512),[[h,r.value==="code"]]),o(e("div",null,[e("div",Q,[e("div",R,[e("div",W,[o(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=s=>t.value.enable=s)},null,512),[[i,t.value.enable]]),X])]),Y,e("div",Z,[e("div",ee,[o(e("input",{class:"check-btn",type:"checkbox",disabled:!t.value.enable,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.cache=s)},null,8,te),[[i,t.value.cache]]),le])]),se,o(e("input",{type:"text",class:"select-form mt-0",placeholder:"一级缓存时长",disabled:!(t.value.enable&&t.value.cache),"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.cacheL1=s)},null,8,ae),[[c,t.value.cacheL1,void 0,{number:!0}]]),oe,o(e("input",{type:"text",class:"select-form mt-0",placeholder:"二级缓存时长",disabled:!(t.value.enable&&t.value.cache),"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.cacheL2=s)},null,8,ne),[[c,t.value.cacheL2,void 0,{number:!0}]]),de,e("div",ie,[e("div",ce,[o(e("input",{class:"check-btn",type:"checkbox",disabled:!t.value.enable,"onUpdate:modelValue":l[5]||(l[5]=s=>t.value.parallel=s)},null,8,ue),[[i,t.value.parallel]]),re])]),e("div",pe,[e("div",ve,[o(e("input",{class:"check-btn",type:"checkbox",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[6]||(l[6]=s=>t.value.origin=s)},null,8,be),[[i,t.value.origin]]),he])]),e("div",_e,[e("div",me,[o(e("input",{class:"check-btn",type:"checkbox",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[7]||(l[7]=s=>t.value.ignore_search=s)},null,8,xe),[[i,t.value.ignore_search]]),fe])]),ge,e("ul",ye,[e("label",ke,[V("Parallel并发引擎线程数："),e("span",null,U(t.value.threads)+"个",1)]),o(e("input",{type:"range",min:"2",max:"5",class:"slider w-full",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[8]||(l[8]=s=>t.value.threads=s)},null,8,we),[[c,t.value.threads,void 0,{number:!0}]])]),Ne,o(e("input",{type:"text",class:"select-form mt-0",placeholder:"请求一级超时时长",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[9]||(l[9]=s=>t.value.timeoutL1=s)},null,8,Ce),[[c,t.value.timeoutL1,void 0,{number:!0}]]),Se,o(e("input",{type:"text",class:"select-form mt-0",placeholder:"请求二级超时时长",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[10]||(l[10]=s=>t.value.timeoutL2=s)},null,8,Ve),[[c,t.value.timeoutL2,void 0,{number:!0}]])])],512),[[h,r.value==="visual"]]),e("button",{onClick:l[11]||(l[11]=s=>m()),type:"button",class:"apply-btn"},"保存")])])])])])]))}},Me=M(Ue,[["__scopeId","data-v-2bfeb25d"]]);export{Me as default};
