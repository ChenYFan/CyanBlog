import{r as v,w as S,h as B,o as U,c as V,a as e,d as o,e as C,i as b,j as _,v as d,g as c,f as N,t as O,p as J,k as L}from"./index-497b97f3.js";import{M}from"./CodeEditor-36560fae.js";import{C as F,n as m}from"./notyf-b7b7a415.js";import{_ as I}from"./EditableTable-6698bd71.js";import{r as j}from"./reinit-8d43c4a4.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const a=u=>(J("data-v-b748b313"),u=u(),L(),u),E={class:"w-full p-6 mx-auto"},A={class:"flex flex-wrap -mx-3"},T={class:"w-full max-w-full px-3"},$={class:"relative flex flex-col h-full min-w-0 break-words bg-white border-0 shadow-soft-xl rounded-2xl bg-clip-border"},P=a(()=>e("div",{class:"p-4 pb-0 mb-0 bg-white border-b-0 rounded-t-2xl"},[e("h6",{class:"mb-0"},"Blog获取配置 / Blog Fetch Config")],-1)),q={class:"flex-auto p-4"},z=a(()=>e("h6",{class:"mt-6 font-bold leading-tight uppercase text-xs text-slate-500"},"选择编辑模式",-1)),G={class:"mb-4"},H=a(()=>e("option",{value:"visual"},"可视化编辑",-1)),K=a(()=>e("option",{value:"code"},"JSON数据库编辑",-1)),Q=[H,K],R={class:"flex-auto p-4"},W={class:"monacoEditor"},X={class:"flex flex-col pl-0 mb-0 rounded-lg"},Y={class:"relative block px-0 py-2 bg-white border-0 rounded-t-lg text-inherit"},Z={class:"min-h-6 mb-0.5 block pl-0"},ee=a(()=>e("label",{class:"label-text"},"启用“Blog本地智能调度功能”",-1)),te=a(()=>e("h6",{class:"mt-3 font-bold leading-tight uppercase text-xs text-slate-500"},"Blog缓存设置 ",-1)),le={class:"relative text-inherit"},se={class:"min-h-6 mb-0.5 block pl-0"},ae=["disabled"],oe=a(()=>e("label",{class:"label-text"},"启用“Blog缓存功能”",-1)),ne=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 一级缓存时长（毫秒） ",-1)),ie=["disabled"],de=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 二级缓存时长（毫秒） ",-1)),ce=["disabled"],ue=a(()=>e("h6",{class:"mt-5 font-bold leading-tight uppercase text-xs text-slate-500"},"Blog Fetch 设置",-1)),re={class:"relative text-inherit"},pe={class:"min-h-6 mb-0.5 block pl-0"},ve=["disabled"],he=a(()=>e("label",{class:"label-text"},"启用“智能多线程Fetch引擎”",-1)),be={class:"relative text-inherit"},_e={class:"min-h-6 mb-0.5 block pl-0"},me=["disabled"],xe=a(()=>e("label",{class:"label-text"},"在多线程请求时允许将原请求作为附加源加入",-1)),ge={class:"relative text-inherit"},fe={class:"min-h-6 mb-0.5 block pl-0"},ye=["disabled"],we=a(()=>e("label",{class:"label-text"},"屏蔽Search字符串以提升缓存命中率",-1)),ke=a(()=>e("h6",{class:"mt-3 font-bold leading-tight uppercase text-xs text-slate-500"},"多线程请求设置 ",-1)),Se={class:"flex flex-col pl-0"},Be={class:"label-text ml-0"},Ue=["disabled"],Ve=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 请求一级超时时长（毫秒） ",-1)),Ce=["disabled"],Ne=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 请求二级超时时长（毫秒） ",-1)),Oe=["disabled"],Je=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 匹配域名（含端口，逗号分隔） ",-1)),Le=["disabled","value"],Me=a(()=>e("h6",{class:"mt-2 font-bold leading-tight uppercase text-xs text-slate-500"}," 镜像内容 ",-1)),Fe={class:"flex flex-col pl-0 mb-0 rounded-lg"},h="Blog_Fetch_Config",Ie={__name:"blogFetch",setup(u){const p=new F("CyanAcc","CyanAccDB"),r=v("visual"),t=v({}),x=async()=>{await p.write(h,JSON.stringify(t.value)),await j()?m.success("设置已保存并应用"):m.info("设置已保存，但尚未应用")},i=v("");S(t,(n,l)=>{i.value=JSON.stringify(n,null,4)},{deep:!0}),(async()=>{const n=JSON.parse(await p.read(h)||"{}");Object.keys(n).length!==0?(t.value=n,i.value=JSON.stringify(t.value,null,4)):await p.write(h,JSON.stringify(t.value))})();const g={language:"json",code:i.value},f=B({el:"monaco",options:g}),y=n=>{i.value=n;try{JSON.parse(i.value)}catch{console.log();return}t.value=JSON.parse(i.value)},w={type:{type:"string",description:"镜像类型",width:"20%"},var:{type:"json",description:"镜像拼接变量",width:"50%"},weight:{type:"number",description:"权重",width:"5%"}},k=n=>{t.value.mirrors=n};return(n,l)=>(U(),V("div",E,[e("div",A,[e("div",T,[e("div",$,[P,e("div",q,[z,e("div",G,[o(e("select",{class:"select-form","onUpdate:modelValue":l[0]||(l[0]=s=>r.value=s)},Q,512),[[C,r.value]])]),e("div",R,[o(e("div",W,[_(M,{option:f,value:i.value,onUpdateContent:y},null,8,["option","value"])],512),[[b,r.value==="code"]]),o(e("div",null,[e("div",X,[e("div",Y,[e("div",Z,[o(e("input",{class:"check-btn",type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=s=>t.value.enable=s)},null,512),[[d,t.value.enable]]),ee])]),te,e("div",le,[e("div",se,[o(e("input",{class:"check-btn",type:"checkbox",disabled:!t.value.enable,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.cache=s)},null,8,ae),[[d,t.value.cache]]),oe])]),ne,o(e("input",{type:"text",class:"select-form mt-0",placeholder:"一级缓存时长",disabled:!(t.value.enable&&t.value.cache),"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.cacheL1=s)},null,8,ie),[[c,t.value.cacheL1,void 0,{number:!0}]]),de,o(e("input",{type:"text",class:"select-form mt-0",placeholder:"二级缓存时长",disabled:!(t.value.enable&&t.value.cache),"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.cacheL2=s)},null,8,ce),[[c,t.value.cacheL2,void 0,{number:!0}]]),ue,e("div",re,[e("div",pe,[o(e("input",{class:"check-btn",type:"checkbox",disabled:!t.value.enable,"onUpdate:modelValue":l[5]||(l[5]=s=>t.value.parallel=s)},null,8,ve),[[d,t.value.parallel]]),he])]),e("div",be,[e("div",_e,[o(e("input",{class:"check-btn",type:"checkbox",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[6]||(l[6]=s=>t.value.origin=s)},null,8,me),[[d,t.value.origin]]),xe])]),e("div",ge,[e("div",fe,[o(e("input",{class:"check-btn",type:"checkbox",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[7]||(l[7]=s=>t.value.ignore_search=s)},null,8,ye),[[d,t.value.ignore_search]]),we])]),ke,e("ul",Se,[e("label",Be,[N("Parallel并发引擎线程数："),e("span",null,O(t.value.threads)+"个",1)]),o(e("input",{type:"range",min:"2",max:"5",class:"slider w-full",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[8]||(l[8]=s=>t.value.threads=s)},null,8,Ue),[[c,t.value.threads,void 0,{number:!0}]])]),Ve,o(e("input",{type:"text",class:"select-form mt-0",placeholder:"请求一级超时时长",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[9]||(l[9]=s=>t.value.timeoutL1=s)},null,8,Ce),[[c,t.value.timeoutL1,void 0,{number:!0}]]),Ne,o(e("input",{type:"text",class:"select-form mt-0",placeholder:"请求二级超时时长",disabled:!(t.value.enable&&t.value.parallel),"onUpdate:modelValue":l[10]||(l[10]=s=>t.value.timeoutL2=s)},null,8,Oe),[[c,t.value.timeoutL2,void 0,{number:!0}]]),Je,e("input",{type:"text",class:"select-form mt-0",placeholder:"匹配域名",disabled:!t.value.enable,value:t.value.domain,onInput:l[11]||(l[11]=s=>t.value.domain=s.target.value.split(","))},null,40,Le),Me,e("div",Fe,[_(I,{data:t.value.mirrors,keyintro:w,onUpdateContent:k},null,8,["data"])])])],512),[[b,r.value==="visual"]]),e("button",{onClick:l[12]||(l[12]=s=>x()),type:"button",class:"apply-btn"},"保存")])])])])])]))}},Pe=D(Ie,[["__scopeId","data-v-b748b313"]]);export{Pe as default};
