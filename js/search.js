(()=>{let u="only-content";if(document.getElementById("search-type-toggle")){var e,t=document.body,n=document.getElementById("search-type-toggle").getElementsByTagName("input");for(e of n)e.value==t.getAttribute("search-type-toggle")&&(e.checked=!0),e.addEventListener("change",e=>{var t,a=e.target.value;u=a;for(t of n)t.value!=a&&(t.checked=!1);e.preventDefault(),l(r.value)})}var g=[],a=document.getElementById("search-form");let r=document.getElementById("searchbox"),h=document.getElementById("search-results"),l=(r.select(),n=>{var r,l,s=[],t=[];for(let e=0;e<g.length;e++){var c=JSON.parse(JSON.stringify(g[e]));let t="",a=-1;switch(u){case"only-content":t=JSON.stringify(c.content),a=t.search(n);break;case"full":t=JSON.stringify(c),a=t.search(n);break;case"fuzzy":var i=n.split(" ");for(let e=0;e<i.length;e++){var o=i[e];if(t=JSON.stringify(c),-1!==(a=t.search(o)))break}}-1!==a&&(c.content=(l=r=void 0,r=0<a-50?a-50:0,l=a+50<t.length?a+50:t.length,t.substring(r,l).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\n/g,"\n").replace(n,`<span class="searched-highlight">${n}</span>`)),s.push(c))}if(0<s.length)for(let e=0;e<s.length;e++){let n=s[e];var a=document.createElement("article");a.classList.add("post-list-item"),a.innerHTML=`
        <a href="${n.url}">
            <div class="content">
                ${n.categories?`<div class="categories${document.body.attributes["data-uppercase-categories"].value?" text-uppercase":""}">${(()=>{let t="";for(let e=0;e<n.categories.length;e++){var a=n.categories[e];t+=`<span>${a}</span>`}return t})()}</div>`:""}
        <div class="title">${n.title}</div>
        <div class="excerpt">${n.content}</div>
    </div>
</a>
                `,t.push(a)}else{var e=document.createElement("div");e.className="no-results",e.innerHTML="抱歉，没有找到你所查找的内容",t.push(e)}h.innerHTML="";for(let e=0;e<t.length;e++){var d=t[e];h.appendChild(d)}});a.addEventListener("submit",e=>{if(e.preventDefault(),""!=g)l(r.value);else{let t=document.createElement("div");t.className="no-results",t.innerHTML="稍等，仍在获取索引文件中...",h.appendChild(t),fetch(document.body.attributes["data-config-root"].value+document.body.attributes["data-search-path"].value).then(e=>e.json()).then(e=>{g=e,t.remove(),l(r.value)})}})})();